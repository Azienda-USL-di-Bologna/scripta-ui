<span class="title-box">
  <!-- <h4>{{doc.oggetto}}</h4> -->
  <h4>
    <i *ngIf="doc.visibilitaLimitata && !doc.riservato " pTooltip="VisibilitÃ  limitata" class="pi pi-eye"></i>
    <i *ngIf=" doc.riservato " pTooltip="Riservato" class="pi pi-eye-slash"></i>
    {{doc.oggetto}}
  </h4>
  


<!-- 
  <h4 *ngIf="doc.visibilitaLimitata && !doc.riservato" class="pi pi-eye"></h4>
  <h4 *ngIf="doc.riservato" class="pi pi-eye-slash"></h4>
  <h4 *ngIf="!doc.visibilitaLimitata && !doc.riservato">{{doc.oggettoVisualizzazione}}</h4> -->
  <p-button icon="pi pi-times" (onClick)="closePanel()"></p-button>
</span>

<p-button class="margin-bot" *ngIf = "docUtilsService.isDocApribile(doc)" 
      label="Apri documento" icon="pi pi-book" (onClick)="docUtilsService.openDoc(doc,utente)"></p-button>
<!-- *ngIf="(!doc.visibilitaLimitata && !doc.riservato) " -->

<p-accordion>
  <p-accordionTab
    [selected]="accordionSelected[0] && canVisualizeAllegati()"
    [ngClass]="accordionSelected[0] && canVisualizeAllegati() ? 'tab-accordion-selected' : ''"
    [disabled]="!canVisualizeAllegati()">
    <ng-template pTemplate="header">
      <span class="vertical-align-middle">{{ canVisualizeAllegati() ? 'Allegati' : 'Non puoi visualizzare gli allegati di questo documento' }}</span>
    </ng-template>
    <ng-template pTemplate="content">
      <attachments-box 
        *ngIf="canVisualizeAllegati()"
        [idDoc]="doc.id"
        [config]="attachmentsBoxConfig">
      </attachments-box>
      <h4>
        <!-- <i *ngIf="doc.visibilitaLimitata && !doc.riservato  " class="pi pi-eye"></i>
        <i *ngIf="!doc.visibilitaLimitata && doc.riservato " class="pi pi-eye-slash"></i> -->
        <!-- {{!doc.visibilitaLimitata && doc.riservato && !hasUserPienaVisibilita(doc) ? "[Riservato]" : ""}} -->
        <!-- {{doc.visibilitaLimitata && !doc.riservato  ? "Visibilita limitata" : ""}} -->
      </h4>
    </ng-template>
  </p-accordionTab>
  <p-accordionTab 
    header="Versamenti"
    [(selected)]="accordionSelected[1]"
    *ngIf = "isResponsabileVersamento === true"
    [ngClass]="accordionSelected[1] ? 'tab-accordion-selected' : ''">
    <versamenti [idDoc]="doc.id"></versamenti>
  </p-accordionTab>
</p-accordion>
