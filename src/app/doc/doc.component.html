<!-- <peis *ngIf="unitaDocumentaria" [document]="unitaDocumentaria"
    (save)="onDoSave($event)" (protocolla)="onDoProtocolla($event)" ></peis>
 -->
<p-toast position="center" (onClose)="clearMessages()"></p-toast>

<p-toolbar>
  <button pButton type="button" label="Salva" icon="material-icons save"
    (click)="doButtonSave()" class="my-button custom-primary-button">
  </button>
  
  <button pButton type="button" label="Protocolla" icon="material-icons-outlined person_add"
    (click)="doButtonProtocolla()" class="my-button custom-primary-button" 
    ><!-- [disabled]="doc?.dataRegistrazione || !document.oggetto" -->
  </button>

  <button pButton type="button" label="Note" 
    (click)="doButtonNote()" class="my-button custom-primary-button">
  </button>
</p-toolbar>
<main>
  <section class="info-documento">
    <span class="dati-creazione">
      <span>
      Proposta numero 6 del 2021
      </span>
      <span>
        Creato il giorno {{ removeZoneFromTime(doc?.dataCreazione?.toString()) | date: 'EE d MMM y, H:mm' | titlecase}}
        da: {{doc?.idPersonaCreazione?.descrizione}}
      </span>
    </span>
    <label for="oggetto" class="label-oggetto">Oggetto</label>
    <textarea  id="oggetto"
      aria-label="oggetto"
      class="oggetto"
      pInputTextarea 
      placeholder="Inserisci l'oggetto"
      rows="2" 
      cols="30"
      (keyup)="timeOutAndSaveDoc(doc, 'oggetto')"
      [(ngModel)]="doc!.oggetto">
    </textarea>
    <div class="protocollato-da-box">
      <label for="protocollatoda">Protocollato da</label>
      <input id="protocollatoda"
             aria-label="protocollato da"
             disabled="true"
        pInputText 
        type="text" 
        [disabled]="false"
        [(ngModel)]="descrizioneUtenteRegistrante">
    </div>
  </section>
  <div class="protocollo-esterno-box p-grid">
    <label class="p-col-3" for="datiProtocolloEsterno">Dati protocollo Esterno</label>
    <p-inputNumber
            aria-label="numero protocollo esterno"
            disabled="true"
            id="datiProtocolloEsterno"
            inputId="integeronly"
            [(ngModel)]="DatiProtocolloEsterno"
            class="p-col">
    </p-inputNumber>
    <label class="p-col-2" for="dataProtocollazione">Del</label>
    <p-calendar
            disabled="true"
            id="dataProtocollazione"
            aria-label="data di protocollazione"
            [(ngModel)]="dataProtocollazione"
            dateFormat="dd/mm/yy"
            [showIcon]="true"
            inputId="icon"
            appendTo="body"
            class="p-col">
    </p-calendar>
  </div>

  <p-accordion class="accodion-box">
    <p-accordionTab header="Mittente" [selected]="true">
      <mittente [doc]="doc" (saveMittenteEvent)="saveDoc($event,'mittenti')"></mittente>
    </p-accordionTab>
    <p-accordionTab header="Destinatari">
      <ng-template pTemplate="content">
        <destinatari [doc]="doc" (saveDestinatariEvent)="saveDoc($event,'destinatari')"> </destinatari>
      </ng-template>
    </p-accordionTab>
    <p-accordionTab header="Allegati">
      <ng-template pTemplate="content">
        <allegati></allegati>
      </ng-template>
    </p-accordionTab>
  </p-accordion>
</main>
